# 格安マッチングアプリ要件定義書

## 1. プロジェクト概要

### アプリ名
prototype1（仮称）

### 目的
- 既存のマッチングアプリの高額な利用料に対する格安代替案の提供
- パパ活を目的としたマッチングサービス

### 収益モデル
- **Phase1（MVP）**: 完全無料でサービス提供
- **Phase2以降**: いいねポイント課金制
  - 1ポイント = 100円
  - ポイント消費でいいね機能を利用
  - 基本機能（マッチング後のチャット等）は引き続き無料

### ターゲットユーザー
- **女性ユーザー**: 20代のパパを探している女性
- **男性ユーザー**: 40代以降のパパ

### 想定規模
- 個人開発プロジェクト
- 目標ユーザー数: ～1,000人

## 2. 技術仕様

### フロントエンド
- React Native
- Expo

### バックエンド・データベース
- Supabase

### ビデオチャット技術
- WebRTC（react-native-webrtc）
- Supabase Realtime（シグナリング）

### プラットフォーム
- iOS/Android対応のスマートフォンアプリ

## 3. MVP機能仕様

### 3.1 ユーザー認証・登録
- **機能**: メールアドレス/パスワードでの新規登録・ログイン
- **詳細**:
  - **本人確認・年齢確認**:
    - 本人確認書類のアップロード（運転免許証、健康保険証、マイナンバーカード）
    - AIによる自動年齢確認（18歳以上のチェック）
    - 書類の真正性チェック
    - **年齢確認未完了時の制限**:
      - 利用可能：プロフィール作成・編集、ユーザー検索・閲覧、いいね・スワイプ機能
      - 利用不可：メッセージ送信機能のみ制限
  - 性別選択
  - 基本プロフィール情報入力

### 3.2 プロフィール機能
- **機能**: ユーザープロフィールの作成・編集・閲覧
- **詳細**:
  - 基本情報（年齢、居住地、職業など）
  - 自己紹介文
  - 趣味・興味
  - 希望条件設定

### 3.3 画像・動画アップロード機能
- **機能**: プロフィール画像・動画のアップロード
- **詳細**:
  - 複数枚の画像アップロード（最大5枚）
  - 動画アップロード（最大20秒、最大50MB）
  - 画像・動画の削除・並び替え
  - 自動リサイズ・圧縮

### 3.4 マッチング機能
- **機能**: ユーザー同士の相互マッチングシステム
- **詳細**:
  - **いいね機能**: 他のユーザーのプロフィールに「いいね」を送信
  - **スワイプ機能**: 左スワイプ（パス）、右スワイプ（いいね）
  - **相互マッチング**: 双方が「いいね」した場合にマッチ成立
  - **マッチ一覧**: マッチしたユーザーの一覧表示
  - **マッチ解除**: 不適切なマッチの解除機能

### 3.5 ユーザー検索・フィルタリング機能
- **機能**: 条件に基づいたユーザー検索・表示
- **詳細**:
  - **年齢フィルタ**: 年齢範囲での絞り込み（例：25-35歳）
  - **地域フィルタ**: 都道府県・市区町村での絞り込み
  - **職業フィルタ**: 職業カテゴリでの絞り込み
  - **オンライン状況**: 最終ログイン時間での絞り込み
  - **カード形式表示**: スワイプしやすいカード型UI

### 3.6 チャット機能
- **機能**: マッチしたユーザー同士のメッセージ交換
- **詳細**:
  - テキストメッセージ送受信
  - 既読・未読表示
  - メッセージ履歴保存
  - リアルタイム通知
  - **年齢確認制限**: 年齢確認未完了ユーザーはメッセージ送信不可（受信は可能）

### 3.7 通知機能
- **機能**: 重要なアプリ内イベントのプッシュ通知
- **詳細**:
  - **いいね受信通知**: 他のユーザーからいいねされた時の通知
  - **マッチ成立通知**: 相互いいねでマッチが成立した時の通知
  - **メッセージ受信通知**: 新しいメッセージを受信した時の通知
  - **通知設定**: ユーザーが通知のON/OFFを個別設定可能

### 3.8 ユーザーフロー
- **新規登録フロー**: アカウント作成 → プロフィール作成 → 利用開始 → 本人確認書類アップロード
- **マッチングフロー**: ユーザー検索・閲覧 → いいね/スワイプ → マッチ成立 → チャット開始
- **基本操作フロー**: 既存マッチングアプリと同様の直感的な操作体験
- **画面遷移**: タブベースのナビゲーション（ホーム/検索/マッチ/チャット/設定）
- **本人確認タイミング**: メッセージ送信時に本人確認完了が必要（それまでは他機能利用可能）

## 4. Phase2対応機能

### 4.1 ポイント課金システム
- **機能**: いいね機能の有料化とポイント購入
- **詳細**:
  - **ポイント販売**: 1ポイント = 100円
  - **いいね消費**: 1いいね = 1ポイント消費
  - **ポイント購入**: アプリ内課金（Apple Pay/Google Pay）
  - **ポイント残高表示**: リアルタイム残高確認
  - **購入履歴**: ポイント購入・消費履歴の表示

### 4.2 ビデオチャット機能
- **機能**: マッチしたユーザー同士のビデオ通話
- **詳細**:
  - 1対1のビデオ通話
  - 音声のみ通話への切り替え
  - 通話時間制限（毎回10分まで）
  - 通話履歴の記録
  - 通話中の画面共有機能（オプション）
  - 通話録画防止機能

### 4.3 サポート機能拡張
- **FAQ機能**: よくある質問の自動回答システム
- **チャットボット**: 基本的な問い合わせの自動対応
- **ビデオ通話サポート**: 通話トラブル時の技術サポート

## 5. 非機能要件

### 5.1 パフォーマンス
- アプリ起動時間: 3秒以内
- チャット送信遅延: 1秒以内
- 画像読み込み時間: 5秒以内

### 5.2 セキュリティ
- **データ暗号化**:
  - パスワード：Supabase保存時のハッシュ化（bcrypt等）
  - 個人情報：データベース内での暗号化保存
  - 通信：HTTPS/TLS暗号化
  - 本人確認書類：暗号化保存＋定期削除
- **本人確認システム**:
  - AI画像解析による年齢確認
  - 書類偽造検出機能
  - 手動審査との併用（必要に応じて）
- **プライバシー保護**:
  - 位置情報の適切な管理（おおまかな地域のみ表示）
  - 個人を特定できる情報の厳重管理
- **コンテンツモデレーション**:
  - 不適切な画像・動画の自動検出
  - ユーザー報告機能
  - 悪質ユーザーの自動検出・警告システム

### 5.3 スケーラビリティ
- 1,000人のアクティブユーザーに対応
- 同時チャット数: 100セッション

### 5.4 運営・保守
- **サポート体制**: 24時間365日対応
- **モデレーション**: AI+人間のハイブリッド体制
- **システム監視**: サーバー・アプリケーションの24時間監視
- **データバックアップ**: 日次自動バックアップ
- **セキュリティ監視**: 不正アクセス・異常動作の即時検知

### 5.5 UI/UX要件
- **デザイン方針**: 既存マッチングアプリ（Pairs、Tapple等）と同様のUI/UX
- **基本画面構成**:
  - ホーム画面（カードスワイプ）
  - 検索・フィルタ画面
  - マッチ一覧画面
  - チャット画面
  - プロフィール画面（自分・相手）
  - 設定画面
- **操作性**: 直感的なスワイプ操作とタップ操作
- **レスポンシブデザイン**: iOS/Android両対応
- **アクセシビリティ**: 特別な配慮は行わない（標準レベル）

### 5.6 データ管理要件
- **データ保存期間**: MVP段階では詳細未定義（基本機能実装後に検討）
- **バックアップ方針**: 日次自動バックアップのみ実装（詳細仕様は後日検討）
- **GDPR等海外対応**: 現段階では考慮対象外（日本国内向けサービスとして開始）
- **データ削除**: ユーザーアカウント削除時の基本的なデータ削除のみ実装
- **将来対応**: Phase2以降での詳細なデータガバナンス要件策定を予定

## 6. 法的・運営上の注意事項

### 6.1 法的コンプライアンス
- 18歳未満の利用禁止の徹底
- 売春防止法への配慮
- 個人情報保護法への準拠
- 利用規約・プライバシーポリシーの整備

### 6.2 コンテンツモデレーション
- **AIによる一次スクリーニング**:
  - 不適切な画像・動画の自動検出
  - 不適切なテキストメッセージの自動検出
  - 疑わしいアカウント行動の自動検出
- **人間モデレーターによる二次審査**:
  - AIで判断困難な複雑なケースの手動審査
  - ユーザー報告に対する詳細調査
  - アカウント停止・警告の最終判断
- **ハイブリッド運用体制**:
  - 24時間365日の監視体制
  - 重要度に応じたエスカレーション機能
  - 悪質ユーザーのアカウント停止機能

### 6.3 カスタマーサポート体制
- **チャットサポート**: 24時間365日のオペレータ対応
- **対応内容**:
  - アカウント・技術的な問題
  - 本人確認に関するサポート
  - 不適切なユーザーの報告受付
  - 利用規約・プライバシーポリシーに関する質問
- **対応言語**: 日本語のみ
- **レスポンス目標**: 1時間以内の初回応答

## 7. 開発スケジュール（目安）

1. **フェーズ1**: 基盤構築（2週間）
   - Expo/React Native環境構築
   - Supabase設定
   - 基本認証機能

2. **フェーズ2**: 本人確認・プロフィール機能開発（5週間）
   - 本人確認書類アップロード機能
   - AI年齢確認システム統合
   - プロフィール機能
   - 画像・動画アップロード機能

3. **フェーズ3**: マッチング機能開発（3週間）
   - いいね・スワイプ機能
   - ユーザー検索・フィルタリング機能
   - マッチング成立システム

4. **フェーズ4**: チャット・通知機能開発（3週間）
   - リアルタイムチャット実装
   - プッシュ通知機能（いいね受信、マッチ成立、メッセージ受信）
   - 通知設定機能

5. **フェーズ5**: テスト・リリース準備（2週間）
   - 総合テスト
   - セキュリティテスト
   - ストア申請準備

## 8. Phase2開発スケジュール（目安）

1. **Phase2-1**: ポイント課金システム開発（3週間）
   - アプリ内課金（IAP）実装
   - ポイント管理システム
   - 課金UI/UX開発

2. **Phase2-2**: ビデオチャット機能開発（4週間）
   - WebRTC実装
   - ビデオ通話UI/UX
   - 通話品質最適化

3. **Phase2-3**: テスト・リリース準備（2週間）
   - 課金機能テスト
   - ビデオチャット機能テスト
   - アップデート申請準備

## 9. リスク管理

### 高リスク項目
- 法的問題（売春防止法関連）
- ストア審査での拒否リスク
- 悪質ユーザーによるサービス悪用

### 対策
- 法的アドバイスの取得
- 利用規約の厳格な運用
- 24時間監視体制の構築（将来的に）

---

**注意**: このアプリケーションの開発・運営には法的リスクが伴います。必ず専門家に相談の上、適切な法的対応を行ってください。