# ãƒãƒƒãƒãƒ³ã‚°ã‚¢ãƒ—ãƒª ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆæ›¸ï¼ˆå€‹äººé–‹ç™ºå‘ã‘ï¼‰

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: React Native + Expo
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: Supabase Edge Functions (Deno)
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: Supabase PostgreSQL + RLS
- **èªè¨¼**: Supabase Auth (JWT)
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡**: Supabase Realtime
- **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**: Supabase Storage + Google Cloud Storage
- **é€šçŸ¥ãƒ»éŸ³éŸ¿**: Expo Haptics + Expo Audio
- **ã‚¤ãƒ³ãƒ•ãƒ©**: Supabase + Google Cloud Storage + Cloud CDN
- **ç”»åƒå‡¦ç†**: Vision API (ç”»åƒå¯©æŸ»)
- **ãƒãƒ£ãƒƒãƒˆ**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°

## ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³

```mermaid
graph TB
    subgraph "Client Layer"
        A[iOS App<br/>React Native + Expo]
        B[Android App<br/>React Native + Expo]
        A1[Haptics + Audio<br/>ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ»é€šçŸ¥éŸ³]
    end
    
    subgraph "API Gateway & Edge Functions"
        C[Supabase Edge Functions<br/>Deno Runtime]
        C1[search-profiles âš ï¸å®Ÿè£…å¿…è¦]
        C1A[get-recommended-profiles âœ…]
        C2[get-matches-with-profiles âœ…]
        C3[get-partner-profile âœ…]
        C4[get-chat-list âœ…]
        C5[get-chat-messages âœ…]
        C6[send-message âœ…]
    end
    
    subgraph "Backend Services"
        D[Supabase Auth<br/>èªè¨¼ãƒ»èªå¯ãƒ»JWT]
        E[Supabase Database<br/>PostgreSQL + RLS]
        E1[Users & Profiles]
        E2[Likes & Matches]
        E3[Chat Rooms & Messages]
        F[Supabase Realtime<br/>WebSocketãƒ»ãƒãƒ£ãƒƒãƒˆ]
        G[Supabase Storage<br/>ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜]
    end
    
    subgraph "External Services"
        H[Google Cloud Storage<br/>ç”»åƒãƒ»å‹•ç”»ä¿å­˜]
        I[Cloud CDN<br/>é…ä¿¡æœ€é©åŒ–]
        J[Vision API<br/>ç”»åƒå¯©æŸ»]
        L[FCM/APNs<br/>ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥]
    end
    
    subgraph "App Stores"
        M[App Store]
        N[Google Play]
    end
    
    A --> C
    B --> C
    A --> A1
    A --> F
    
    C --> C1
    C --> C1A
    C --> C2
    C --> C3
    C --> C4
    C --> C5
    C --> C6
    
    C --> D
    C --> E
    E --> E1
    E --> E2
    E --> E3
    F --> E3
    C --> G
    
    G --> H
    H --> I
    C --> J
    C --> L
    
    A --> M
    B --> N
    
    classDef client fill:#e1f5fe
    classDef backend fill:#f3e5f5
    classDef external fill:#fff3e0
    classDef store fill:#e8f5e8
    classDef functions fill:#e8f6ff
    
    class A,B,A1 client
    class C,C1,C1A,C2,C3,C4,C5,C6 functions
    class D,E,E1,E2,E3,F,G backend
    class H,I,J,L external
    class M,N store
```

## ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è©³ç´°

### ã‚µãƒ¼ãƒ“ã‚¹å±¤çµ±åˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
```mermaid
graph TB
    subgraph "Client Services Layer"
        A1[AuthService âœ…<br/>èªè¨¼ãƒ»ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†]
        A2[ApiService âœ…<br/>EdgeFunctionçµ±åˆ]
        A3[ChatService âœ…<br/>ãƒãƒ£ãƒƒãƒˆãƒ»ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ]
        A4[MatchingService âœ…<br/>ãƒãƒƒãƒãƒ³ã‚°ãƒ»æ¤œç´¢]
        A5[ProfileService âœ…<br/>ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç®¡ç†]
        A6[MediaService âœ…<br/>ç”»åƒãƒ»å‹•ç”»ç®¡ç†]
        A7[ValidationService âœ…<br/>å…¥åŠ›å€¤æ¤œè¨¼]
        A8[SoundService âœ…<br/>éŸ³éŸ¿ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯]
        A9[Logger âœ…<br/>çµ±ä¸€ãƒ­ã‚°ç®¡ç†]
    end
    
    subgraph "UI Components"
        B1[HomeScreen<br/>ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³]
        B2[ChatScreen<br/>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒ£ãƒƒãƒˆ]
        B3[ProfileScreens<br/>ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«CRUD]
        B4[CardSwiper<br/>ã‚¹ãƒ¯ã‚¤ãƒ—UI]
    end
    
    subgraph "Supabase EdgeFunctions"
        C1[search-profiles]
        C2[get-chat-list]
        C3[send-message]
    end
    
    B1 --> A4
    B2 --> A3
    B3 --> A5
    B4 --> A4
    
    A1 --> A2
    A3 --> A2
    A4 --> A2
    A5 --> A2
    
    A2 --> C1
    A2 --> C2
    A2 --> C3
    
    A3 --> A8
    A4 --> A9
    A5 --> A7
```

### æ–°å®Ÿè£…ã‚µãƒ¼ãƒ“ã‚¹è©³ç´°

#### ApiServiceï¼ˆçµ±ä¸€EdgeFunctionç®¡ç†ï¼‰
- **EdgeFunctionå‘¼ã³å‡ºã—çµ±ä¸€åŒ–**: callEdgeFunction(), callEdgeFunctionWithRetry()
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: çµ±ä¸€çš„ãªã‚¨ãƒ©ãƒ¼å‡¦ç†ã¨ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½ã€ãƒãƒƒãƒå‡¦ç†å¯¾å¿œ
- **èªè¨¼çµ±åˆ**: AuthServiceã¨ã®é€£æºã§BearerTokenè‡ªå‹•ä»˜ä¸

#### AuthServiceï¼ˆèªè¨¼çŠ¶æ…‹ç®¡ç†ï¼‰
- **ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†**: getCurrentSession(), getCurrentUser()
- **èªè¨¼ãƒã‚§ãƒƒã‚¯**: isAuthenticated(), isCurrentUser()
- **JWTçµ±åˆ**: getBearerToken()ã§EdgeFunctionèªè¨¼

#### æ›´æ–°ã•ã‚ŒãŸMatchingService
- **EdgeFunctionçµ±åˆ**: getRecommendedProfiles(), searchProfiles()
- **æ¤œç´¢æ©Ÿèƒ½**: å¹´é½¢ãƒ»éƒ½é“åºœçœŒãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å¯¾å¿œ
- **æ—¢å­˜æ©Ÿèƒ½ç¶­æŒ**: ãƒãƒƒãƒãƒªã‚¹ãƒˆã€ç›¸æ‰‹ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å–å¾—

#### SoundServiceï¼ˆæ–°è¦å®Ÿè£…ï¼‰
- **é€šçŸ¥éŸ³ç®¡ç†**: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡éŸ³ã€ãƒãƒƒãƒæˆç«‹éŸ³
- **ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œ**: iOS/Androidä¸¡å¯¾å¿œ
- **ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†**: initialize(), cleanup()

## é¸æŠç†ç”±

- **React Native + Expo**: å€‹äººé–‹ç™ºã«æœ€é©ã€‚ä¸€ã¤ã®ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã§iOS/Androidå¯¾å¿œã€è±Šå¯Œãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨Expoã®ç°¡å˜ãªãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤æ©Ÿèƒ½
- **Supabase**: Firebaseä»£æ›¿ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹BaaSã€‚PostgreSQLã€èªè¨¼ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’çµ±åˆæä¾›ã€‚å€‹äººé–‹ç™ºè€…ã«å„ªã—ã„æ–™é‡‘ä½“ç³»
- **Supabase Edge Functions**: Deno Runtimeä¸Šã§ã®ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹é–¢æ•°ã€‚TypeScriptãƒã‚¤ãƒ†ã‚£ãƒ–ã‚µãƒãƒ¼ãƒˆã€‚ã‚»ã‚­ãƒ¥ã‚¢ãªAPIå®Ÿè£…ãŒå¯èƒ½
- **Supabase PostgreSQL**: é«˜æ©Ÿèƒ½ãªãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«DBã€‚Row Level Securityï¼ˆRLSï¼‰ã§ã‚»ã‚­ãƒ¥ã‚¢ãªãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆè¨­è¨ˆãŒå¯èƒ½
- **Supabase Auth**: JWTèªè¨¼ã€OAuthå¯¾å¿œã€ãƒ¡ãƒ¼ãƒ«èªè¨¼ãªã©å¿…è¦ãªèªè¨¼æ©Ÿèƒ½ã‚’ç°¡å˜ã«å®Ÿè£…ã€‚è¿½åŠ ã‚³ã‚¹ãƒˆãªã—
- **Supabase Realtime**: PostgreSQLã®å¤‰æ›´ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«é€šçŸ¥ã€‚WebSocketãƒ™ãƒ¼ã‚¹ã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ã‚’å®Ÿç¾
- **Supabase Storage**: ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ãƒ»é…ä¿¡ã€‚RLSã«ã‚ˆã‚‹ã‚»ã‚­ãƒ¥ã‚¢ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
- **Google Cloud Storage + Cloud CDN**: ç”»åƒãƒ»å‹•ç”»ã®å¤§å®¹é‡ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¨CDNé…ä¿¡ã€‚å¾“é‡èª²é‡‘ã§å°è¦æ¨¡æ™‚ã¯ä½ã‚³ã‚¹ãƒˆ
- **Vision API**: ç”»åƒã®è‡ªå‹•å¯©æŸ»ï¼ˆä¸é©åˆ‡ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ¤œå‡ºã€SafeSearchï¼‰ã€‚äººæ‰‹ã§ã®å¯©æŸ»ã‚³ã‚¹ãƒˆã‚’å¤§å¹…å‰Šæ¸›ã€‚é«˜ç²¾åº¦ãªæ—¥æœ¬èªå¯¾å¿œ
- **Expo Haptics + Audio**: ãƒã‚¤ãƒ†ã‚£ãƒ–ãªè§¦è¦šãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã¨éŸ³éŸ¿åŠ¹æœã€‚UXå‘ä¸Šã«è²¢çŒ®

## åˆæœŸã‚³ã‚¹ãƒˆï¼ˆInitialï¼‰
- **Apple Developer Program**: $99
- **Google Play Developer**: $25
- **ãƒ‰ãƒ¡ã‚¤ãƒ³å–å¾—**: $15
- **SSLè¨¼æ˜æ›¸**: $0 (Let's Encrypt)
- **é–‹ç™ºãƒ„ãƒ¼ãƒ«**: $0 (ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹)
- **åˆè¨ˆ**: $139

## ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ã‚³ã‚¹ãƒˆ

### Phase 1 (MVP - ~100ãƒ¦ãƒ¼ã‚¶ãƒ¼)
- **Supabase Pro**: $25/æœˆ
- **Google Cloud Storage**: $3/æœˆ (50GBæƒ³å®š)
- **Cloud CDN**: $2/æœˆ
- **Vision API**: $8/æœˆ (1000ç”»åƒ/æœˆæƒ³å®š)
- **ãƒ‰ãƒ¡ã‚¤ãƒ³**: $1/æœˆ
- **åˆè¨ˆ**: $39/æœˆ ($468/å¹´)

**ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½è¿½åŠ ã«ã‚ˆã‚‹å¤‰æ›´ç‚¹:**
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡ã«ã‚ˆã‚‹å¸¯åŸŸå¹…ä½¿ç”¨é‡å¾®å¢—ï¼ˆSupabase Proå†…ã§å¯¾å¿œï¼‰
- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¿å­˜ã«ã‚ˆã‚‹DBå®¹é‡å¾®å¢—ï¼ˆåŒä¸Šï¼‰
- é€šçŸ¥éŸ³ãƒ»ãƒãƒ—ãƒ†ã‚£ã‚¯ã‚¹æ©Ÿèƒ½ã¯è¿½åŠ ã‚³ã‚¹ãƒˆãªã—ï¼ˆExpoæ¨™æº–æ©Ÿèƒ½ï¼‰

### Phase 2 (æˆé•·æœŸ - ~1000ãƒ¦ãƒ¼ã‚¶ãƒ¼)
- **Supabase Pro**: $25/æœˆ
- **Google Cloud Storage**: $12/æœˆ (200GBæƒ³å®š)
- **Cloud CDN**: $8/æœˆ
- **Vision API**: $40/æœˆ (5000ç”»åƒ/æœˆæƒ³å®š)
- **ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ (FCM/APNs)**: $0 (ç„¡æ–™æ å†…)
- **ãƒ‰ãƒ¡ã‚¤ãƒ³**: $1/æœˆ
- **åˆè¨ˆ**: $86/æœˆ ($1,032/å¹´)

### Phase 3 (ã‚¹ã‚±ãƒ¼ãƒ«æœŸ - 1000ãƒ¦ãƒ¼ã‚¶ãƒ¼è¶…)
- **Supabase Team**: $599/æœˆ
- **Google Cloud Storage**: $30/æœˆ (500GBæƒ³å®š)
- **Cloud CDN**: $25/æœˆ
- **Vision API**: $120/æœˆ (15000ç”»åƒ/æœˆæƒ³å®š)
- **å¤–éƒ¨å¹´é½¢ç¢ºèªã‚µãƒ¼ãƒ“ã‚¹**: $100/æœˆ
- **ãƒ‰ãƒ¡ã‚¤ãƒ³**: $1/æœˆ
- **åˆè¨ˆ**: $875/æœˆ ($10,500/å¹´)

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ç‰¹å¾´

### ğŸ¯ å€‹äººé–‹ç™ºæœ€é©åŒ–
- **ãƒ¯ãƒ³ã‚¹ãƒˆãƒƒãƒ—é–‹ç™º**: Supabaseã§èªè¨¼ãƒ»DBãƒ»APIãƒ»ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚’çµ±åˆç®¡ç†
- **ãƒãƒ¼ã‚³ãƒ¼ãƒ‰/ãƒ­ãƒ¼ã‚³ãƒ¼ãƒ‰**: ç®¡ç†ç”»é¢ã€åˆ†æãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãŒæ¨™æº–è£…å‚™
- **ç°¡å˜ãƒ‡ãƒ—ãƒ­ã‚¤**: Expo EAS Buildã§è‡ªå‹•ãƒ“ãƒ«ãƒ‰ãƒ»ã‚¹ãƒˆã‚¢ç”³è«‹

### ğŸ’° ã‚³ã‚¹ãƒˆåŠ¹ç‡
- **å¾“é‡èª²é‡‘**: åˆ©ç”¨é‡ã«å¿œã˜ãŸæ–™é‡‘ä½“ç³»ã§åˆæœŸã¯ä½ã‚³ã‚¹ãƒˆ
- **ç„¡æ–™æ æ´»ç”¨**: å¤šãã®ã‚µãƒ¼ãƒ“ã‚¹ã§ç„¡æ–™æ ã‚’æœ€å¤§é™æ´»ç”¨
- **é‹ç”¨è‡ªå‹•åŒ–**: æ‰‹å‹•é‹ç”¨ã‚’æœ€å°é™ã«æŠ‘åˆ¶

### ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- **RLSï¼ˆRow Level Securityï¼‰**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¬ãƒ™ãƒ«ã§ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
- **JWTèªè¨¼**: ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¬ã‚¹ã§å®‰å…¨ãªèªè¨¼ã‚·ã‚¹ãƒ†ãƒ 
- **HTTPS/WSS**: å…¨é€šä¿¡ã®æš—å·åŒ–

### ğŸ“ˆ ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£
- **æ®µéšçš„æˆé•·**: ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°ã«å¿œã˜ã¦ãƒ—ãƒ©ãƒ³å¤‰æ›´ã§å¯¾å¿œ
- **ãƒãƒãƒ¼ã‚¸ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹**: ã‚¤ãƒ³ãƒ•ãƒ©ç®¡ç†ã®è² æ‹…ã‚’æœ€å°åŒ–
- **ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹åŒ–**: å¿…è¦ã«å¿œã˜ã¦æ©Ÿèƒ½ã‚’åˆ†é›¢å¯èƒ½

## ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è©³ç´°

### ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°æ§‹æˆ
```mermaid
graph LR
    subgraph "Client"
        A[ChatScreen]
        B[ChatService]
        C[SoundService]
    end
    
    subgraph "Edge Functions"
        D[get-chat-list]
        E[get-chat-messages]
        F[send-message]
    end
    
    subgraph "Supabase Services"
        G[Realtime WebSocket]
        H[PostgreSQL]
        I[Auth JWT]
    end
    
    A --> B
    B --> D
    B --> E
    B --> F
    B --> G
    A --> C
    
    D --> H
    E --> H
    F --> H
    F --> I
    G --> H
```

### ãƒãƒ£ãƒƒãƒˆãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼
1. **ãƒãƒ£ãƒƒãƒˆä¸€è¦§è¡¨ç¤º**:
   - `get-chat-list` EdgeFunction â†’ ãƒãƒƒãƒæƒ…å ± + æœ€çµ‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ + æœªèª­æ•°ã‚’ä¸€æ‹¬å–å¾—
   - Service Role Keyä½¿ç”¨ã§RLSãƒã‚¤ãƒ‘ã‚¹ã€ã‚»ã‚­ãƒ¥ã‚¢ãªãƒ‡ãƒ¼ã‚¿çµ±åˆ

2. **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡**:
   - `send-message` EdgeFunction â†’ ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ ä½œæˆ/å–å¾— â†’ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æŒ¿å…¥
   - PostgreSQL ãƒˆãƒªã‚¬ãƒ¼ã§ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ æœ€çµ‚æ›´æ–°æ™‚åˆ»ã‚’è‡ªå‹•æ›´æ–°

3. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å—ä¿¡**:
   - Supabase Realtime â†’ `messages`ãƒ†ãƒ¼ãƒ–ãƒ«å¤‰æ›´ç›£è¦–
   - INSERT/UPDATE ã‚¤ãƒ™ãƒ³ãƒˆã§ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¸å³åº§ã«é…ä¿¡
   - éŸ³éŸ¿ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼ˆSoundServiceï¼‰ã¨ãƒãƒ—ãƒ†ã‚£ã‚¯ã‚¹è‡ªå‹•å®Ÿè¡Œ

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¬ã‚¤ãƒ¤ãƒ¼
- **JWTèªè¨¼**: å…¨EdgeFunctionã§Bearer Tokenæ¤œè¨¼
- **ãƒãƒƒãƒé–¢ä¿‚ç¢ºèª**: é€ä¿¡è€…ãŒãƒãƒƒãƒç›¸æ‰‹ã§ã‚ã‚‹ã“ã¨ã‚’å¼·åˆ¶æ¤œè¨¼
- **RLS**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¬ãƒ™ãƒ«ã§ã®å¤šé‡ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
- **Service Role Key**: EdgeFunctionå†…ã§ã®ã‚»ã‚­ãƒ¥ã‚¢ãªãƒ‡ãƒ¼ã‚¿æ“ä½œ

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- **ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æœ€é©åŒ–**: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å–å¾—ãƒ»æœªèª­æ•°è¨ˆç®—ã®é«˜é€ŸåŒ–
- **ãƒ‡ãƒ¼ã‚¿ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³**: 50ä»¶å˜ä½ã§ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å–å¾—
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å¸¯åŸŸåˆ¶å¾¡**: å¿…è¦æœ€å°é™ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿é…ä¿¡
- **ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã‚­ãƒ£ãƒƒã‚·ãƒ¥**: ChatServiceã§ã®ãƒ­ãƒ¼ã‚«ãƒ«çŠ¶æ…‹ç®¡ç†

## ãƒªã‚¹ã‚¯è»½æ¸›ç­–

### æŠ€è¡“çš„ãƒªã‚¹ã‚¯
- **Vendor Lock-inå¯¾ç­–**: Supabaseã¯ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ãŸã‚ã€å¿…è¦æ™‚ã«è‡ªå‰ç’°å¢ƒã¸ã®ç§»è¡ŒãŒå¯èƒ½
- **éšœå®³å¯¾å¿œ**: ãƒãƒãƒ¼ã‚¸ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã®å†—é•·åŒ–ã¨ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½“åˆ¶
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: CDNæ´»ç”¨ã¨é©åˆ‡ãªã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨­è¨ˆ

### é‹ç”¨ãƒªã‚¹ã‚¯
- **æ³•çš„å¯¾å¿œ**: åˆ©ç”¨è¦ç´„ã®å³æ ¼åŒ–ã¨æ®µéšçš„ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- **ã‚³ã‚¹ãƒˆç®¡ç†**: ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®šã¨å®šæœŸçš„ãªåˆ©ç”¨é‡ç›£è¦–
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: å®šæœŸçš„ãªã‚¢ã‚¯ã‚»ã‚¹æ¨©é™è¦‹ç›´ã—ã¨è„†å¼±æ€§å¯¾å¿œ

ã“ã®è¨­è¨ˆã«ã‚ˆã‚Šã€å€‹äººé–‹ç™ºã§ã‚‚å®‰å…¨ã§æ‹¡å¼µæ€§ã®ã‚ã‚‹ãƒãƒƒãƒãƒ³ã‚°ã‚¢ãƒ—ãƒªã‚’ä½ã‚³ã‚¹ãƒˆã§æ§‹ç¯‰ãƒ»é‹ç”¨ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚ç‰¹ã«GCPã®æ¡ç”¨ã«ã‚ˆã‚Šã€ç”»åƒå‡¦ç†ã®ç²¾åº¦å‘ä¸Šã¨è‹¥å¹²ã®ã‚³ã‚¹ãƒˆå‰Šæ¸›ã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚